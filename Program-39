%{
#include <stdio.h>
#include <string.h>

/* Define the word to replace and its replacement */
char find[50] = "apple";
char replace[50] = "orange";
%}

%%

{find}      { printf("%s", replace); }   /* Replace target word */
.|\n        { printf("%s", yytext); }    /* Print everything else as is */

%%

int main(int argc, char *argv[]) {
    if (argc > 1) {
        FILE *fp = fopen(argv[1], "r");
        if (!fp) {
            printf("Cannot open file: %s\n", argv[1]);
            return 1;
        }
        yyin = fp;
    }

    yylex();  /* Run lexical analysis */

    return 0;
}

int yywrap() {
    return 1;
}
