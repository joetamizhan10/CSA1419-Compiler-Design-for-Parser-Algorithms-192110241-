%{
#include <stdio.h>
#include <stdlib.h>

int num1, num2;
%}

%%

[0-9]+      {
                if (num1 == 0 && yytext[0] != '0')   // first number
                    num1 = atoi(yytext);
                else
                    num2 = atoi(yytext);             // second number
            }

"+"         { printf("%d + %d = %d\n", num1, num2, num1 + num2); num1 = num2 = 0; }
"-"         { printf("%d - %d = %d\n", num1, num2, num1 - num2); num1 = num2 = 0; }
"*"         { printf("%d * %d = %d\n", num1, num2, num1 * num2); num1 = num2 = 0; }
/"          { if (num2 != 0)
                  printf("%d / %d = %d\n", num1, num2, num1 / num2);
              else
                  printf("Error: Division by zero\n");
              num1 = num2 = 0; }

[ \t\n]+    ;   /* Ignore whitespace */
.           ;   /* Ignore other characters */

%%

int main() {
    printf("Enter an expression (like 12+8 or 9*5). Press Ctrl+D to stop:\n\n");
    yylex();
    return 0;
}

int yywrap() {
    return 1;
}
